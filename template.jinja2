# System Interfaces Configuration for {{device.name}}
interfaces {
    {% for iface in device.interfaces.all() %}
    {{ iface.name }} {
        description "{{ iface.label }}";
        {% if iface.enabled %}
        {% if iface.lag %}
        ether-options {
            802.3ad {{ iface.lag.name }};
        }
        {% else %}
        unit 0 {
            family inet {
                {% for ip in iface.ip_addresses.filter(address__net_contained="0/0") %}
                address {{ ip }};
                {% endfor %}
            }
            family inet6 {
                {% for ip in iface.ip_addresses.filter(address__net_contained="::/0") %}
                {% if iface.vhrp_group_assignments.filter(ip_addresses__net_contained=ip.address) %}
                address {{ ip }} {
                    vhrp-group
                {% endif %}
                address {{ ip }};
                {% endfor %}
            }
        }
        {% endif %}
        {% else %}
        disable;
        {% endif %}
    }
    {% endfor %}
}

